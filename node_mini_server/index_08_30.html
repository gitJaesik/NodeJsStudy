<html>
<body></body>
<script>
var divOut = window.document.createElement("div");

window.document.body.appendChild(divOut);
divOut.style.position = 'absolute';
divOut.style.left = 100;
divOut.style.top = 100;
divOut.style.width = 300;
divOut.style.height = 300;
divOut.style.borderStyle = 'solid';

var divIn = [];
for (var i = 0; i < 50; i++) {
    divIn[i] = window.document.createElement("div");
    divIn[i].setAttribute("id", i);
    divOut.appendChild(divIn[i]);
    var parentOfDivIn = window.document.getElementById(String(i)).parentNode;
    
    divIn[i].style.position = 'absolute';
    divIn[i].style.width = 30;
    divIn[i].style.height = 30;
    divIn[i].style.borderRadius = '50%';
    divIn[i].style.left =  Math.round( Math.random() * (parentOfDivIn.clientWidth - divIn[i].clientWidth));
    divIn[i].style.top =  Math.round( Math.random() * (parentOfDivIn.clientHeight - divIn[i].clientHeight));

    var randomColor1 = Math.round( Math.random() * 255);
    var randomColor2 = Math.round( Math.random() * 255);
    var randomColor3 = Math.round( Math.random() * 255);

    divIn[i].style.backgroundColor = 'rgb('+randomColor1+', '+randomColor2+', '+randomColor3+')';  // '#fffff'

	var speedY = Math.round(Math.random() * 4) +1;
	var speedX = Math.round(Math.random() * 4) + 1;
    move(i, speedY, speedX);
}

function move(i, speedY, speedX) {
	var ball = window.document.getElementById(String(i));
	var parentOfBall = ball.parentNode;


	if ( ( parseInt(ball.style.left) <= 0 && speedX < 0) || ( parseInt(ball.style.left) >= parentOfBall.clientWidth - parseInt(ball.style.width) && speedX > 0) ) {
		speedX = -speedX;
	}

	if ( (parseInt(ball.style.top) <= 0 && speedY < 0) || ( parseInt(ball.style.top) >= parentOfBall.clientHeight - parseInt(ball.style.height) && speedY > 0)) {
		speedY = -speedY;
	}

	var x = parseInt(ball.style.left) + speedX;
	ball.style.left = x + 'px';

	var y = parseInt(ball.style.top) + speedY;
	ball.style.top = y + 'px';

	//console.log(speedY);


	var animate = setTimeout(move, 20, i, speedY, speedX);
}

</script>

</html>